#JVM 

  1.jvm分为系统虚拟机和程序虚拟机
  
  2.jvm虚拟机基本结构
  
    1.类加载子系统: 负责从文件系统或网络中加载Class信息,加载信息存放在一块称之为方法区的内存空间中.
    
    2.方法区:就是存放类信息,常量信息,常量池信息,包括字符串字面量和数字常量等
    
    3.java堆:在java虚拟机启动的时候建立java堆,它是java程序最主要的内存工作区域,几乎所有的对象实例都存放到java堆中,堆空间是所有线程共享的.
    
    4.直接内存:java的nio库允许java程序使用直接内存,从而提高性能,通常直接内存速度会优与java堆,读写频繁的场合可能会考虑使用.
    
    5.每个虚拟机线程都有一个私有的栈,一个线程的java栈在线程创建的时候被创建,java栈中保存着局部变量,方法参数,同时java的方法调用,返回值等.
    
    6.本地方法栈和java栈非常类似,最大不同为本地方法栈用于本地方法调用,java虚拟机允许java直接调用本地方法
    
    7.垃圾收集系统是java的核心,也是比不可少的,java有一套自己进行的垃圾清理机制,开发人员无需手工清理.
    
    8.PC(Program Counter) 寄存器也是每个线程私有的空间,java虚拟机会为每个线程创建pc寄存器,在任意时刻,一个java线程总是在执行一个方法,这个方法被称之为当前方法,如果当前方法不是本地方法,PC寄存器就会执行但正在被执行的指令.如果是本地方法,则pc寄存器值为undefined,寄存器存放如但前执行环境指针,程序计数器,操作栈指针,计算的变量指针等信息
    
    9.虚拟机最核心的组件就是执行引擎,他负责执行虚拟机的字节码,一般先进行编译成机器码后执行
    
    
3.堆,栈,方法区概念和联系:

    堆解决数据存储的问题,及数据怎么存放,放在哪儿.
    栈解决程序的运行问题,即程序如何执行,或者如何处理数据
    方法区则是辅助堆栈的快永久区,解决堆栈信息的产生,是先决条件.
   
4.java堆如何管理

    1.java堆是和java程序管理最密切的内存空间,几乎所有的对象到哦存放在其中,并且java堆完全时自动化管理,通过垃圾回收机制,垃圾对象会自动清理,不需要显示的释放.
    2.根据垃圾回收机制不同,java堆有可能拥有不同的结构.最为常见的就是将整个java堆分为新生代和老年待.其中新生代的对象或者年龄不大的对象,老年代则存放老年对象.
    3.新生代分为eden区,s0区,s1区,tenured区,器中s0和s1可以相互之间装换角色
    绝大多数情况对象首先存放在enden区,在一次新生代回收后如果存在,则存放到s0或者s1区,更具垃圾回收次数来判定区分新生代和老年代.
   
5.java栈是一块线程私有的内存空间,一个栈,一般由三部分组成:局部变量表,操作数栈和帧数据区
    1.局部变量表:用于报错函数的参数及局部变量
    2.操作数栈:组要保存计算过程的中间结果,同时作为计算过程中变量临时的存储空间
    3.帧数据区:除了局部变量表和操作数栈以外,栈还需要一些数据来支持常量池的解析,这里帧数据区保存着访问常量池的指针,方便程序访问常量池,另外,当函数返回或者出现异常时,虚拟机必须有一个异常处理表,方便发送异常的时候找到异常的代码,因此异常处理表也是帧数据区的一部分.
    
6.java方法区
    1.方法区是一块所有线程共享的内存区域.他保存系统的类信息,比如类的字段,方法,常量池等.方法区的大小决定了系统可以保存多少个类,如果系统定义太多哥他类,导致方法区溢出.虚拟机同样会抛出溢出错误.方法区可以理解为永久区.
 
7.堆分配参数

    -XX:+PrintGC 使用这个参数,虚拟机启动,只要遇到GC就会打印日志.
    -XX:+UseSerialGC配置串行回收器
    -XX:+PrintGCDetails 可以查看详细信息,包括各个区的情况
    -Xms:设置java程序启动时初始堆大小
    -Xmx:设置java程序能获得的最大堆大小
    -Xmx20m -Xms5m -XX:+PrintCommandLineFlags:可以将隐式或者显示传给虚拟机的参数输出
    -Xmn:可以设置新生代的大小
    -XX:SurvivorRatio:用来设置新生代中eden空间和from/to空间比例
    
    
